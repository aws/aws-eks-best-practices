name: "Ensure Deployment has more than one replica configured"
uniqueName: "DEPLOYMENT_INCORRECT_REPLICAS_VALUE"
enabledByDefault: true
documentationUrl: "https://hub.datree.io/ensure-minimum-two-replicas"
messageOnFailure: "Incorrect value for key `replicas` - running 2 or more replicas will increase the availability of the service"
category: Workload
complexity: medium
impact: When running two or more replicas per service, you are increasing the availability of the containerized service by not relying on a single pod to do all of the work
schema:
  if:
    properties:
      kind:
        enum:
          - Deployment
  then:
    properties:
      spec:
        properties:
          replicas:
            minimum: 2
