---
date: 2023-09-22
authors: 
  - Florian Daniel Otel
---
# 成本优化 - 简介
AWS 云经济学是一门帮助客户通过采用像 Amazon EKS 这样的现代计算技术来提高效率和降低成本的学科。该学科建议遵循一种称为"云财务管理 (CFM) 框架"的方法论，该框架由 4 个支柱组成：

![CFM 框架](../images/cfm_framework.png)

## 观察支柱：测量和问责
观察支柱是一组基础活动和技术，用于定义如何测量、监控和创建云支出的问责制。它通常被称为"可观察性"、"检测"或"遥测"。"可观察性"基础设施的功能和限制决定了可以优化的内容。获得对成本的清晰了解是成本优化的关键第一步，因为您需要知道从哪里开始。这种可见性也将指导您需要采取哪些活动来进一步优化您的环境。

以下是我们关于观察支柱的最佳实践概述：

* 为您的工作负载定义和维护标记策略。
    * 使用[实例标记](https://docs.aws.amazon.com/eks/latest/userguide/eks-using-tags.html#tag-resources-for-billing)，为 EKS 集群添加标记可让您查看单个集群成本并在成本和使用情况报告中分配它们。
* 通过使用诸如 [Kubecost](https://docs.kubecost.com/install-and-configure/install/provider-installations/aws-eks-cost-monitoring) 等技术来建立 EKS 使用情况的报告和监控。
    * [启用云智能仪表板](https://wellarchitectedlabs.com/cost/200_labs/200_enterprise_dashboards/)，通过正确标记资源并使用可视化，您可以测量和估算成本。
* 将云成本分配给应用程序、业务线 (LoBs) 和收入来源。
* 定义、测量并与业务利益相关者传达效率/价值关键绩效指标。例如，创建一个"单位指标"关键绩效指标，用于测量每笔交易的成本，例如共享乘车服务可能会有一个"每次乘车成本"的关键绩效指标。

有关与此支柱相关的推荐技术和活动的更多详细信息，请参阅本指南的[成本优化 - 可观察性](./cost_opt_observability.md)部分。

## 节省支柱：成本优化

该支柱基于在"观察"支柱中开发的技术和功能。以下活动通常属于此支柱：

* 识别并消除环境中的浪费。
* 为成本效率设计和构建。
* 选择最佳购买选项，例如按需实例与 Spot 实例。
* 随着服务的发展而适应：随着 AWS 服务的发展，有效使用这些服务的方式可能会发生变化。请保持乐于适应这些变化。

由于这些活动是操作性的，它们在很大程度上取决于您环境的特征。问问自己，成本的主要驱动因素是什么？不同环境提供了什么业务价值？哪些购买选项和基础设施选择(例如实例系列类型)最适合每个环境？

以下是 EKS 集群最常见的成本驱动因素的优先级列表：

1. **计算成本：**结合多种实例系列类型、购买选项以及平衡可扩展性和可用性需要仔细考虑。有关更多信息，请参阅本指南[成本优化 - 计算](./cost_opt_compute.md)部分中的建议。
2. **网络成本：**为 EKS 集群使用 3 个可用区可能会增加跨可用区流量成本。有关如何平衡高可用性要求和降低网络流量成本的建议，请参阅本指南的[成本优化 - 网络](./cost_opt_networking.md)部分。
3. **存储成本：**根据 EKS 集群中工作负载的无状态/有状态性质，以及不同存储类型的使用方式，存储可视为工作负载的一部分。有关 EKS 存储成本的注意事项，请参阅本指南的[成本优化 - 存储](./cost_opt_storage.md)部分。

## 规划支柱： 规划和预测

一旦实施了观察支柱中的建议，集群就会持续进行优化。随着在高效运营集群方面积累经验，规划和预测活动可以专注于：

* 动态预算和预测云成本。
* 量化 EKS 容器服务所提供的业务价值。
* 将 EKS 集群成本管理与 IT 财务管理规划相结合。

## 运行支柱

成本优化是一个持续的过程，涉及一个渐进式改进的飞轮：

![成本优化飞轮](../images/flywheel.png)

为这些类型的活动获得高管赞助是至关重要的，可将 EKS 集群优化融入组织的"FinOps"工作中。它允许通过对 EKS 集群成本的共同理解、实施 EKS 集群成本防护以及确保工具、自动化和活动随着组织需求的发展而发展来实现利益相关者的一致性。

## 参考资料
* [AWS 云经济学、云财务管理](https://aws.amazon.com/aws-cost-management/)