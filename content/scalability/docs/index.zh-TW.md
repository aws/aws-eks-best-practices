# EKS 擴展最佳實踐
本指南提供了有關擴展 EKS 集群的建議。擴展 EKS 集群的目標是最大化單個集群可以執行的工作量。使用單個大型 EKS 集群可以減少與使用多個集群相比的操作負載,但對於跨區域部署、租戶隔離和集群升級等方面存在權衡。在本文中,我們將重點介紹如何實現單個集群的最大擴展能力。

## 如何使用本指南
本指南適用於負責在 AWS 中創建和管理 EKS 集群的開發人員和管理員。它著重於一些通用的 Kubernetes 擴展實踐,但沒有針對自行管理的 Kubernetes 集群或在 AWS 區域之外運行的集群 [EKS Anywhere](https://anywhere.eks.amazonaws.com/) 的具體內容。

每個主題都有簡短的概述,後面是操作大規模 EKS 集群的建議和最佳實踐。主題不需要按特定順序閱讀,建議也不應在未經測試和驗證可在您的集群中運行的情況下應用。

## 了解擴展維度
可擴展性與 [性能](https://aws.github.io/aws-eks-best-practices/reliability/docs/) 和 [可靠性](https://aws.github.io/aws-eks-best-practices/reliability/docs/) 不同,在規劃集群和工作負載需求時應該考慮這三個方面。隨著集群的擴展,需要對其進行監控,但本指南不會涵蓋監控最佳實踐。EKS 可以擴展到很大的規模,但您需要規劃如何將集群擴展超過 300 個節點或 5000 個 pod。這些並非絕對數字,而是與多個用戶、工程師和支持專業人員合作編寫本指南時得出的結果。

Kubernetes 中的擴展是多維度的,沒有特定的設置或建議可以適用於每種情況。我們可以為以下主要領域提供擴展指導:

* [Kubernetes 控制平面](control-plane)
* [Kubernetes 數據平面](data-plane)
* [集群服務](cluster-services)
* [工作負載](workloads)

**Kubernetes 控制平面** 在 EKS 集群中包括 AWS 為您自動運行和擴展的所有服務 (例如 Kubernetes API 服務器)。擴展控制平面是 AWS 的責任,但負責任地使用控制平面是您的責任。

**Kubernetes 數據平面** 擴展涉及到集群和工作負載所需的 AWS 資源,但這些資源位於 EKS 控制平面之外。包括 EC2 實例、kubelet 和存儲在內的資源都需要隨著集群的擴展而擴展。

**集群服務** 是在集群內運行並為集群和工作負載提供功能的 Kubernetes 控制器和應用程序。這些可以是 [EKS 附加組件](https://docs.aws.amazon.com/eks/latest/userguide/eks-add-ons.html) 以及您為合規性和集成而安裝的其他服務或 Helm 圖表。隨著工作負載的擴展,這些服務通常會被工作負載依賴,因此您的集群服務也需要隨之擴展。

**工作負載** 是您擁有集群的原因,應該與集群一起水平擴展。工作負載在 Kubernetes 中有一些集成和設置可以幫助集群擴展。Kubernetes 抽象概念(如命名空間和服務)也有一些架構考慮因素。

## 超大規模擴展
如果您要將單個集群擴展超過 1000 個節點或 50,000 個 pod,我們很樂意與您交談。我們建議您聯繫您的支持團隊或技術帳戶經理,以便與專家取得聯繫,他們可以幫助您規劃和擴展超出本指南所提供的信息。